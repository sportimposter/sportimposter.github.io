<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Imposter">
<meta name="theme-color" content="#6366f1">
<title>Imposter</title>
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect width='180' height='180' rx='40' fill='%236366f1'/><circle cx='90' cy='70' r='22' fill='white'/><path d='M50 125c0-28 80-28 80 0v15H50z' fill='white'/></svg>">
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%236366f1'/><circle cx='50' cy='38' r='14' fill='white'/><path d='M28 70c0-18 44-18 44 0v8H28z' fill='white'/></svg>">
<style>
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
:root{
  --bg:#000000;
  --card:#0f0f12;
  --card-light:#18181f;
  --accent:#ffffff;
  --accent-glow:rgba(255,255,255,0.4);
  --text:#ffffff;
  --text-muted:#8b8b94;
  --border:#27272f;
  --success:#22c55e;
  --danger:#ef4444;
  --danger-glow:rgba(239,68,68,0.4);
}
body{
  font-family:-apple-system,BlinkMacSystemFont,ui-sans-serif,system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  min-height:-webkit-fill-available;
  overflow-x:hidden;
  position:relative;
}
body::before{
  content:'';
  position:fixed;
  inset:0;
  background:radial-gradient(circle at 50% 0%,rgba(255,255,255,0.08),transparent 60%);
  pointer-events:none;
  z-index:0;
}
html{height:-webkit-fill-available}
.screen{
  display:none;
  min-height:100vh;
  min-height:-webkit-fill-available;
  padding:20px;
  animation:fadeIn .4s ease;
  position:relative;
  z-index:1;
}
.screen.active{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:28px;
  padding:36px;
  max-width:480px;
  width:100%;
  margin:0 auto;
  box-shadow:0 25px 80px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.03);
  position:relative;
  overflow:hidden;
}
.card::before{
  content:'';
  position:absolute;
  top:-50%;
  left:-50%;
  width:200%;
  height:200%;
  background:radial-gradient(circle,rgba(255,255,255,0.04),transparent 40%);
  pointer-events:none;
}
.card>*{position:relative}
h1{
  font-size:clamp(48px,12vw,72px);
  margin:0 0 12px 0;
  font-weight:900;
  background:linear-gradient(135deg,#ffffff 0%,#d4d4d8 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  letter-spacing:-2px;
  text-shadow:0 0 60px var(--accent-glow);
}
h2{
  font-size:clamp(24px,5vw,32px);
  margin:0 0 24px 0;
  font-weight:700;
  letter-spacing:-.5px;
}
button{
  background:linear-gradient(135deg,var(--accent),#d4d4d8);
  color:#000000;
  border:none;
  border-radius:20px;
  padding:18px 36px;
  font-size:17px;
  font-weight:700;
  margin:10px;
  cursor:pointer;
  transition:all .3s cubic-bezier(.4,0,.2,1);
  box-shadow:0 0 30px var(--accent-glow),0 8px 24px rgba(0,0,0,.4);
  -webkit-user-select:none;
  user-select:none;
  position:relative;
  overflow:hidden;
  letter-spacing:.3px;
}
button::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,.2),transparent);
  opacity:0;
  transition:opacity .3s;
}
button:active{
  transform:scale(.96);
  box-shadow:0 0 20px var(--accent-glow),0 4px 12px rgba(0,0,0,.5);
}
button:active::before{opacity:1}
button.secondary{
  background:var(--card-light);
  border:2px solid var(--border);
  box-shadow:0 4px 12px rgba(0,0,0,.3);
}
button.secondary:active{
  background:var(--card);
  border-color:var(--accent);
}
input,select{
  width:100%;
  padding:18px;
  border-radius:16px;
  border:2px solid var(--border);
  background:var(--card-light);
  color:var(--text);
  margin-bottom:16px;
  font-size:16px;
  transition:all .3s ease;
  font-weight:500;
}
input:focus,select:focus{
  outline:none;
  border-color:var(--accent);
  background:var(--card);
  box-shadow:0 0 0 4px var(--accent-glow);
}
label{
  display:block;
  text-align:left;
  margin-bottom:10px;
  font-weight:700;
  font-size:13px;
  text-transform:uppercase;
  letter-spacing:1px;
  color:var(--text-muted);
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:14px;
  max-width:900px;
  width:100%;
  margin:0 auto;
}
.tile{
  background:var(--card);
  border:2px solid var(--border);
  padding:36px 20px;
  border-radius:24px;
  font-size:18px;
  font-weight:700;
  cursor:pointer;
  transition:all .3s cubic-bezier(.4,0,.2,1);
  position:relative;
  overflow:hidden;
  -webkit-user-select:none;
  user-select:none;
  letter-spacing:.3px;
}
.tile::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,var(--accent),#d4d4d8);
  opacity:0;
  transition:opacity .3s;
}
.tile::after{
  content:'';
  position:absolute;
  inset:-2px;
  border-radius:24px;
  padding:2px;
  background:linear-gradient(135deg,var(--accent),#d4d4d8);
  -webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  opacity:0;
  transition:opacity .3s;
}
.tile:active{
  transform:scale(.95);
  box-shadow:0 0 40px var(--accent-glow);
}
.tile:active::before{opacity:.15}
.tile:active::after{opacity:1}
.tile span{position:relative;z-index:1}
.tile.used{
  opacity:.25;
  pointer-events:none;
  background:var(--card-light);
  transform:scale(.97);
}
.tile.pulsing{
  animation:pulse 2s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.05)}
}
.shake{
  animation:shake 0.5s ease-in-out;
}
@keyframes shake{
  0%,100%{transform:translateX(0)}
  25%{transform:translateX(-10px)}
  75%{transform:translateX(10px)}
}
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.95);
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:100;
  animation:fadeIn .3s ease;
  padding:20px;
}
.overlay.show{display:flex}
.overlay .card{
  animation:slideUp .4s cubic-bezier(.4,0,.2,1);
  max-width:440px;
  margin-bottom:0;
}
@keyframes slideUp{from{opacity:0;transform:translateY(40px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}
.muted{color:var(--text-muted);font-weight:500}
.subtitle{
  font-size:18px;
  color:var(--text-muted);
  margin-bottom:40px;
  font-weight:500;
  letter-spacing:.3px;
}
#names{margin:24px 0}
.speaker-card{
  background:linear-gradient(135deg,var(--accent),#d4d4d8);
  padding:28px;
  border-radius:24px;
  margin-bottom:20px;
  box-shadow:0 0 40px var(--accent-glow),0 12px 32px rgba(0,0,0,.5);
  color:#000000;
}
.speaker-card h3{
  margin:0 0 10px 0;
  font-size:13px;
  text-transform:uppercase;
  letter-spacing:2px;
  opacity:.7;
  font-weight:700;
}
.speaker-card h2{
  margin:0;
  font-size:clamp(26px,6vw,36px);
  font-weight:800;
  letter-spacing:-.5px;
  color:#000000;
}
.role-card{text-align:center;padding:40px}
.role-word{
  font-size:clamp(40px,10vw,56px);
  font-weight:900;
  margin:28px 0;
  background:linear-gradient(135deg,var(--success),#34d399);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  letter-spacing:-1px;
  text-shadow:0 0 60px rgba(34,197,94,.4);
}
.role-hint{
  font-size:22px;
  color:var(--text-muted);
  font-style:italic;
  margin-top:20px;
  font-weight:600;
  letter-spacing:.5px;
}
.imposter-text{
  font-size:clamp(44px,12vw,60px);
  font-weight:900;
  margin:28px 0;
  background:linear-gradient(135deg,var(--danger),#f87171);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  letter-spacing:-1px;
  text-shadow:0 0 60px rgba(239,68,68,.4);
  animation:pulseText 2s ease-in-out infinite;
}
@keyframes pulseText{
  0%,100%{opacity:1;transform:scale(1)}
  50%{opacity:.85;transform:scale(1.02)}
}
.confetti{
  position:fixed;
  width:10px;
  height:10px;
  background:var(--accent);
  position:absolute;
  animation:confettiFall 3s ease-out forwards;
  pointer-events:none;
}
@keyframes confettiFall{
  to{transform:translateY(100vh) rotate(360deg);opacity:0}
}
.final-word{
  font-size:clamp(36px,8vw,48px);
  font-weight:800;
  color:var(--success);
  margin:24px 0;
  letter-spacing:-.5px;
  text-shadow:0 0 40px rgba(34,197,94,.3);
}
@media(max-width:600px){
  .card{padding:28px 24px}
  .grid{grid-template-columns:repeat(2,1fr);gap:12px}
  .tile{padding:28px 16px;font-size:16px}
  h1{letter-spacing:-1px}
}
@supports not (backdrop-filter:blur(12px)){
  .overlay{background:rgba(0,0,0,.98)}
}
</style>
</head>
<body>
<!-- MENU -->
<div id="menu" class="screen active">
  <div style="display:flex;flex-direction:column;align-items:center;justify-content:center">
    <h1>IMPOSTER</h1>
    <p class="subtitle">Find the imposters among you</p>
    <div class="card">
      <button id="startBtn">Start Game</button>
      <p style="margin-top:20px;font-size:14px;color:var(--text-muted);line-height:1.6">
        A social deduction game where players must identify the imposters who don't know the secret word.
      </p>
    </div>
    <p style="margin-top:16px;font-size:13px;color:var(--text-muted)">
      550+ words • 7 categories • Fully customizable
    </p>
  </div>
</div>
<!-- SETUP -->
<div id="setup" class="screen">
  <div style="width:100%;max-width:480px">
    <h2>Game Setup</h2>
    <div class="card">
      <label>Number of Players</label>
      <input id="playerCount" type="number" min="4" max="12" value="6">
      <label>Number of Imposters</label>
      <input id="imposterCount" type="number" min="1" max="3" value="1">
      <label>Category</label>
      <select id="category">
        <option value="all">All Categories</option>
        <option value="sports">Sports</option>
        <option value="animals">Animals</option>
        <option value="food">Food & Drink</option>
        <option value="locations">Locations</option>
        <option value="objects">Objects</option>
        <option value="entertainment">Entertainment</option>
        <option value="professions">Professions</option>
      </select>
      <button id="settingsToggleBtn" class="secondary" style="width:100%;margin:16px 0">⚙️ Game Settings</button>
      <div id="settingsPanel" style="display:none;margin:20px 0;text-align:left;padding:16px;background:var(--card-light);border-radius:16px">
        <label style="display:flex;align-items:center;cursor:pointer;margin-bottom:12px">
          <input type="checkbox" id="showCategory" checked style="width:auto;margin:0 10px 0 0">
          <span style="font-size:14px;text-transform:none;letter-spacing:0">Show category to imposters</span>
        </label>
        <label style="display:flex;align-items:center;cursor:pointer;margin-bottom:12px">
          <input type="checkbox" id="showHint" checked style="width:auto;margin:0 10px 0 0">
          <span style="font-size:14px;text-transform:none;letter-spacing:0">Give hint to imposters</span>
        </label>
        <label style="display:flex;align-items:center;cursor:pointer;margin-bottom:12px">
          <input type="checkbox" id="impostersKnowEachOther" style="width:auto;margin:0 10px 0 0">
          <span style="font-size:14px;text-transform:none;letter-spacing:0">Imposters know each other (2+ imposters)</span>
        </label>
        <label style="display:flex;align-items:center;cursor:pointer;margin-bottom:12px">
          <input type="checkbox" id="randomSpeaker" checked style="width:auto;margin:0 10px 0 0">
          <span style="font-size:14px;text-transform:none;letter-spacing:0">Random first speaker</span>
        </label>
        <label style="display:flex;align-items:center;cursor:pointer;margin-bottom:12px">
          <input type="checkbox" id="hardMode" style="width:auto;margin:0 10px 0 0">
          <span style="font-size:14px;text-transform:none;letter-spacing:0">Hard mode (no category or hint)</span>
        </label>
        <label style="display:flex;align-items:center;cursor:pointer;margin-bottom:12px">
          <input type="checkbox" id="showWordCount" style="width:auto;margin:0 10px 0 0">
          <span style="font-size:14px;text-transform:none;letter-spacing:0">Show word length to imposters</span>
        </label>
        <label style="display:flex;align-items:center;cursor:pointer">
          <input type="checkbox" id="soundEffects" checked style="width:auto;margin:0 10px 0 0">
          <span style="font-size:14px;text-transform:none;letter-spacing:0">Sound effects</span>
        </label>
      </div>
      <button id="namesBtn">Set Player Names</button>
      <div id="names"></div>
      <button id="beginBtn">Begin Game</button>
      <button id="backBtn" class="secondary">Back to Menu</button>
    </div>
  </div>
</div>
<!-- GAME -->
<div id="game" class="screen">
  <div style="width:100%;max-width:900px">
    <div class="speaker-card">
      <h3>First Speaker</h3>
      <h2 id="speaker"></h2>
    </div>
    <div style="margin-bottom:16px;padding:16px;background:var(--card);border-radius:16px;border:1px solid var(--border)">
      <p style="font-size:14px;color:var(--text-muted);margin-bottom:8px">Progress</p>
      <div style="display:flex;align-items:center;gap:12px">
        <div style="flex:1;height:8px;background:var(--card-light);border-radius:8px;overflow:hidden">
          <div id="progressBar" style="height:100%;background:linear-gradient(90deg,var(--accent),#a855f7);width:0%;transition:width .3s ease"></div>
        </div>
        <p style="font-size:16px;font-weight:700;min-width:60px;text-align:right"><span id="progressText">0/0</span></p>
      </div>
    </div>
    <div id="grid" class="grid"></div>
    <div style="margin-top:20px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
      <button id="revealBtn" style="display:none">Reveal Answer</button>
      <button id="settingsBtn" class="secondary" style="display:none">Change Settings</button>
    </div>
  </div>
</div>
<!-- ROLE -->
<div id="roleOverlay" class="overlay">
  <div class="card role-card">
    <div id="roleContent"></div>
    <button id="closeRole">Got It</button>
  </div>
</div>
<!-- FINAL -->
<div id="finalOverlay" class="overlay">
  <div class="card">
    <h2>Game Over</h2>
    <p class="muted">The word was:</p>
    <p class="final-word" id="finalWord"></p>
    <p class="muted" style="margin-top:24px">The Imposters were:</p>
    <p id="finalImposters" style="font-size:22px;font-weight:700;margin-top:12px"></p>
    <div style="margin-top:32px;padding:20px;background:var(--card-light);border-radius:16px">
      <p class="muted" style="margin-bottom:12px;font-size:14px">Round Summary</p>
      <p style="font-size:18px;font-weight:600;margin-bottom:8px">Category: <span id="finalCategory"></span></p>
      <p style="font-size:16px;color:var(--text-muted)">Hint: "<span id="finalHint"></span>"</p>
    </div>
    <button id="nextRound">Play Again</button>
    <button id="menuBtn" class="secondary">Main Menu</button>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded",()=>{
const menu=document.getElementById("menu");
const setup=document.getElementById("setup");
const game=document.getElementById("game");
const namesDiv=document.getElementById("names");
const grid=document.getElementById("grid");
const speaker=document.getElementById("speaker");
const revealBtn=document.getElementById("revealBtn");
const roleOverlay=document.getElementById("roleOverlay");
const roleContent=document.getElementById("roleContent");
const finalOverlay=document.getElementById("finalOverlay");
const finalWord=document.getElementById("finalWord");
const finalImposters=document.getElementById("finalImposters");
const playerCount=document.getElementById("playerCount");
const imposterCount=document.getElementById("imposterCount");
const category=document.getElementById("category");
const data={
sports:[
  ["Basketball","sneakers"],["Football","tailgate"],["Baseball","peanuts"],
  ["Soccer","vuvuzela"],["Tennis","love"],["Golf","caddy"],
  ["Hockey","glass"],["Volleyball","rotation"],["Swimming","chlorine"],
  ["Boxing","mouthguard"],["Wrestling","headgear"],["Gymnastics","leotard"],
  ["Track","spikes"],["Skiing","lodge"],["Surfing","reef"],
  ["Skateboarding","bearings"],["Cricket","tea"],["Rugby","mud"],
  ["Bowling","shoes"],["Lacrosse","mesh"],["Badminton","feather"],
  ["Archery","fletching"],["Fencing","mask"],["Karate","gi"],
  ["Cycling","jersey"],["Marathon","bib"],["Polo","divot"],
  ["Diving","tuck"],["Rowing","blisters"],["Rock Climbing","chalk bag"],
  ["Softball","cleats"],["Frisbee","plastic"],["Ping Pong","serve"],
  ["Curling","broom"],["Handball","court"],["Water Polo","caps"],
  ["Snowboarding","bindings"],["BMX","helmet"],["Cheerleading","pom poms"],
  ["Figure Skating","sequins"],["Dodgeball","welts"],["Kickball","playground"],
  ["Ultimate Frisbee","zone"],["Racquetball","wall"],["Squash","doubles"],
  ["Judo","belt"],["Taekwondo","breaking"],["CrossFit","chalk"],
  ["Powerlifting","belt"],["Arm Wrestling","table"],["Billiards","felt"],
  ["Table Tennis","spin"],["Pickleball","paddle"],["Darts","cork"],
  ["Bowling","wrist guard"],["Ice Skating","laces"],["Rollerblading","wheels"],
  ["Paddleboarding","balance"],["Kayaking","paddle"],["Canoeing","portage"],
  ["Sailing","wind"],["Windsurfing","mast"],["Kitesurfing","kite"],
  ["Bungee Jumping","platform"],["Skydiving","parachute"],["Paragliding","glide"],
  ["Motocross","dirt"],["NASCAR","oval"],["Formula 1","pit crew"],
  ["Drag Racing","lights"],["Rally Racing","gravel"],["Go Karting","lap time"]
],
animals:[
  ["Dog","collar"],["Cat","litter box"],["Elephant","ivory"],
  ["Giraffe","leaves"],["Lion","pride"],["Tiger","stripes"],
  ["Bear","cave"],["Monkey","trees"],["Zebra","stripes"],
  ["Penguin","tuxedo"],["Eagle","soar"],["Dolphin","clicks"],
  ["Shark","dorsal"],["Whale","blubber"],["Snake","shed"],
  ["Frog","lily pad"],["Rabbit","burrow"],["Turtle","shell"],
  ["Owl","nocturnal"],["Parrot","cracker"],["Kangaroo","pouch"],
  ["Koala","eucalyptus"],["Panda","bamboo"],["Peacock","display"],
  ["Octopus","ink"],["Jellyfish","sting"],["Butterfly","cocoon"],
  ["Bee","honey"],["Spider","web"],["Crocodile","swamp"],
  ["Hamster","wheel"],["Guinea Pig","hay"],["Ferret","weasel"],
  ["Hedgehog","spines"],["Raccoon","mask"],["Squirrel","nuts"],
  ["Deer","antlers"],["Moose","canada"],["Fox","cunning"],
  ["Wolf","howl"],["Cheetah","speed"],["Leopard","tree"],
  ["Gorilla","chest"],["Hippo","water"],["Rhino","charge"],
  ["Camel","hump"],["Llama","spit"],["Alpaca","wool"],
  ["Seal","flippers"],["Walrus","tusks"],["Otter","water"],
  ["Flamingo","pink"],["Pelican","beak"],["Toucan","colorful"],
  ["Bat","cave"],["Mouse","cheese"],["Rat","sewer"],
  ["Chipmunk","cheeks"],["Prairie Dog","burrow"],["Beaver","dam"],
  ["Porcupine","quills"],["Skunk","smell"],["Badger","stripes"],
  ["Meerkat","sentry"],["Wombat","australia"],["Platypus","bill"],
  ["Echidna","spines"],["Tasmanian Devil","cartoon"],["Kiwi","new zealand"],
  ["Emu","australia"],["Ostrich","egg"],["Cassowary","dangerous"],
  ["Swan","grace"],["Duck","quack"],["Goose","honk"],
  ["Heron","pond"],["Crane","origami"],["Stork","baby"],
  ["Vulture","carrion"],["Hawk","prey"],["Falcon","fast"]
],
food:[
  ["Pizza","delivery"],["Burger","grill"],["Sushi","wasabi"],
  ["Pasta","italy"],["Taco","tuesday"],["Sandwich","deli"],
  ["Salad","fork"],["Soup","crackers"],["Steak","rare"],
  ["Chicken","wings"],["Fish","net"],["Rice","asian"],
  ["Cheese","wine"],["Ice Cream","brain freeze"],["Cake","birthday"],
  ["Cookie","milk"],["Donut","coffee"],["Pancake","breakfast"],
  ["Waffle","grid"],["Cereal","milk"],["Toast","butter"],
  ["Egg","sunny side"],["Bacon","breakfast"],["Hot Dog","ballpark"],
  ["Burrito","wrapped"],["Nachos","stadium"],["Popcorn","movie"],
  ["Pretzel","twist"],["Chips","dip"],["Fries","ketchup"],
  ["Lasagna","garfield"],["Ravioli","pocket"],["Spaghetti","lady and tramp"],
  ["Meatball","swedish"],["Ribs","messy"],["Wings","sauce"],
  ["Shrimp","cocktail"],["Lobster","bib"],["Crab","bucket"],
  ["Oyster","aphrodisiac"],["Clam","chowder"],["Scallops","bay"],
  ["Bagel","lox"],["Croissant","french"],["Muffin","stud"],
  ["Brownie","fudge"],["Cupcake","frosting"],["Pie","thanksgiving"],
  ["Cheesecake","new york"],["Pudding","snack pack"],["Jello","mold"],
  ["Yogurt","greek"],["Oatmeal","instant"],["Granola","hippie"],
  ["Peanut Butter","jelly"],["Jelly","sandwich"],["Honey","bee"],
  ["Maple Syrup","canada"],["Ketchup","heinz"],["Mustard","ballpark"],
  ["Ramen","college"],["Pho","vietnam"],["Pad Thai","peanuts"],
  ["Curry","indian"],["Biryani","rice"],["Dumplings","chinese"],
  ["Spring Rolls","wrapper"],["Samosas","fried"],["Empanadas","latin"],
  ["Quesadilla","cheese"],["Enchiladas","mexican"],["Fajitas","peppers"],
  ["Burritos","chipotle"],["Tamales","corn"],["Tacos","shell"],
  ["Gyro","greek"],["Falafel","chickpea"],["Hummus","tahini"],
  ["Kebab","skewer"],["Shawarma","wrap"],["Paella","spain"]
],
locations:[
  ["Beach","sunscreen"],["Mountain","altitude"],["Forest","hiking"],
  ["Desert","cactus"],["Lake","fishing"],["River","rafting"],
  ["Park","picnic"],["Zoo","cage"],["Museum","quiet"],
  ["Library","silence"],["School","homework"],["Hospital","waiting room"],
  ["Airport","security"],["Train Station","delay"],["Mall","shopping"],
  ["Restaurant","tip"],["Hotel","key card"],["Gym","sweat"],
  ["Theater","intermission"],["Stadium","hotdog"],["Church","sermon"],
  ["Castle","moat"],["Bridge","toll"],["Lighthouse","coast"],
  ["Farm","rooster"],["Factory","assembly"],["Warehouse","boxes"],
  ["Bakery","flour"],["Bank","vault"],["Post Office","stamp"],
  ["Grocery Store","cart"],["Gas Station","pump"],["Car Wash","vacuum"],
  ["Pharmacy","prescription"],["Laundromat","quarters"],["Barber Shop","mirror"],
  ["Salon","appointment"],["Spa","robe"],["Dentist","appointment"],
  ["Vet","exam"],["Aquarium","glass"],["Planetarium","stars"],
  ["Casino","chips"],["Bowling Alley","rental"],["Movie Theater","soda"],
  ["Arcade","tickets"],["Miniature Golf","windmill"],["Go Karts","helmet"],
  ["Skate Park","helmet"],["Playground","recess"],["Trampoline Park","waiver"],
  ["Laser Tag","darkness"],["Escape Room","timer"],["Haunted House","scream"],
  ["Concert Hall","usher"],["Opera House","binoculars"],["Comedy Club","heckler"],
  ["Cafe","wifi"],["Diner","vinyl"],["Buffet","plate"],
  ["Drive-In","speaker"],["Food Truck","line"],["Brewpub","flight"],
  ["Vineyard","grapes"],["Distillery","aging"],["Winery","tasting"],
  ["Monastery","silence"],["Temple","incense"],["Mosque","prayer"],
  ["Synagogue","torah"],["Cathedral","stained glass"],["Chapel","wedding"],
  ["Cemetery","flowers"],["Mausoleum","marble"],["Crematorium","urn"],
  ["Courthouse","jury"],["Prison","bars"],["Police Station","interrogation"],
  ["Fire Station","dalmatian"],["Ambulance","siren"],["Observatory","telescope"]
],
objects:[
  ["Phone","charger"],["Computer","mouse"],["TV","remote"],
  ["Book","bookmark"],["Pen","cap"],["Pencil","eraser"],
  ["Clock","alarm"],["Calendar","appointment"],["Camera","flash"],
  ["Mirror","fog"],["Lamp","switch"],["Chair","cushion"],
  ["Table","centerpiece"],["Bed","alarm"],["Pillow","case"],
  ["Blanket","cozy"],["Cup","saucer"],["Plate","napkin"],
  ["Fork","napkin"],["Knife","cutting board"],["Spoon","stirring"],
  ["Bottle","cork"],["Can","opener"],["Bag","groceries"],
  ["Backpack","school"],["Wallet","receipts"],["Keys","keychain"],
  ["Umbrella","rain"],["Sunglasses","summer"],["Hat","bad hair"],
  ["Watch","time"],["Bracelet","jewelry"],["Necklace","jewelry"],
  ["Ring","finger"],["Earrings","pierce"],["Belt","loops"],
  ["Shoes","laces"],["Socks","laundry"],["Gloves","winter"],
  ["Scarf","winter"],["Tie","formal"],["Bow Tie","tuxedo"],
  ["Jacket","zipper"],["Coat","hanger"],["Sweater","grandma"],
  ["Pants","zipper"],["Shorts","summer"],["Skirt","twirl"],
  ["Dress","formal"],["Shirt","iron"],["T-shirt","casual"],
  ["Toothbrush","toothpaste"],["Toothpaste","tube"],["Soap","bubble"],
  ["Shampoo","conditioner"],["Towel","shower"],["Scissors","haircut"],
  ["Hammer","nail"],["Screwdriver","screw"],["Wrench","bolt"],
  ["Drill","hole"],["Saw","wood"],["Pliers","grip"],
  ["Tape Measure","inches"],["Level","straight"],["Flashlight","batteries"],
  ["Battery","remote"],["Charger","plug"],["Extension Cord","outlet"],
  ["Light Bulb","socket"],["Candle","birthday"],["Lighter","cigarette"],
  ["Matches","campfire"],["Frying Pan","stove"],["Pot","stove"],
  ["Kettle","whistle"],["Blender","smoothie"],["Toaster","bread"],
  ["Microwave","beep"],["Oven","baking"],["Refrigerator","magnets"]
],
entertainment:[
  ["Movie","popcorn"],["Concert","crowd"],["Play","curtain"],
  ["Comedy Show","laughter"],["Magic Show","rabbit"],["Circus","clown"],
  ["Carnival","rides"],["Fair","corn dog"],["Festival","crowd"],
  ["Parade","float"],["Fireworks","fourth of july"],["Party","balloons"],
  ["Dance","music"],["Karaoke","microphone"],["Arcade","quarters"],
  ["Bowling Alley","pins"],["Roller Rink","disco"],["Amusement Park","lines"],
  ["Water Park","sunburn"],["Escape Room","clues"],["Laser Tag","darkness"],
  ["Haunted House","jump scare"],["Campfire","marshmallows"],["BBQ","smoke"],
  ["Picnic","ants"],["Beach Party","bonfire"],["Game Night","competitive"],
  ["Trivia Night","questions"],["Talent Show","judges"],["Art Class","canvas"],
  ["Painting","brush"],["Drawing","pencil"],["Pottery","clay"],
  ["Sculpture","chisel"],["Photography","tripod"],["Film","camera"],
  ["Theater","stage"],["Musical","songs"],["Opera","italian"],
  ["Ballet","tutu"],["Hip Hop","rap"],["Jazz","saxophone"],
  ["Rock Concert","guitar"],["Pop Concert","autograph"],["Classical","violin"],
  ["Karate Tournament","trophy"],["Chess Match","board"],["Poker Night","chips"],
  ["Bingo","dauber"],["Lottery","ticket"],["Raffle","ticket"],
  ["Book Club","wine"],["Cooking Class","apron"],["Wine Tasting","spit"],
  ["Beer Tasting","flight"],["Coffee Cupping","slurp"],["Tea Ceremony","zen"],
  ["Meditation","quiet"],["Yoga","mat"],["Pilates","core"],
  ["Zumba","latin"],["Spin Class","bike"],["Barre","ballet"],
  ["Kickboxing","punching"],["Boxing Class","gloves"],["CrossFit","intensity"],
  ["Marathon","running"],["5K","charity"],["Color Run","dye"],
  ["Obstacle Course","mud"],["Scavenger Hunt","list"],["Treasure Hunt","map"],
  ["Murder Mystery","clues"],["Dinner Theater","meal"],["Improv Show","audience"]
],
professions:[
  ["Doctor","stethoscope"],["Nurse","scrubs"],["Teacher","desk"],
  ["Chef","apron"],["Waiter","tips"],["Pilot","wings"],
  ["Flight Attendant","seatbelt"],["Driver","steering wheel"],["Mechanic","grease"],
  ["Plumber","wrench"],["Electrician","voltage"],["Carpenter","saw"],
  ["Painter","ladder"],["Firefighter","dalmatian"],["Police Officer","donut"],
  ["Soldier","uniform"],["Lawyer","suit"],["Judge","gavel"],
  ["Cashier","register"],["Barista","espresso"],["Bartender","shaker"],
  ["Photographer","lens"],["Musician","instrument"],["Singer","microphone"],
  ["Actor","script"],["Dancer","studio"],["Artist","paint"],
  ["Writer","typewriter"],["Journalist","deadline"],["Scientist","lab coat"],
  ["Accountant","calculator"],["Banker","suit"],["Architect","blueprint"],
  ["Engineer","hardhat"],["Programmer","keyboard"],["Designer","photoshop"],
  ["Dentist","drill"],["Veterinarian","animals"],["Pharmacist","pills"],
  ["Librarian","glasses"],["Secretary","desk"],["Receptionist","phone"],
  ["Mail Carrier","uniform"],["Delivery Driver","box"],["Truck Driver","highway"],
  ["Construction Worker","vest"],["Janitor","mop"],["Security Guard","flashlight"],
  ["Lifeguard","whistle"],["Personal Trainer","gym"],["Coach","whistle"],
  ["Referee","striped"],["Umpire","mask"],["Athlete","jersey"],
  ["Model","runway"],["Makeup Artist","brushes"],["Hair Stylist","scissors"],
  ["Tailor","measuring tape"],["Cobbler","shoes"],["Jeweler","magnifying glass"],
  ["Butcher","cleaver"],["Baker","oven"],["Pastry Chef","icing"],
  ["Sommelier","wine"],["Mixologist","cocktails"],["Barback","stock"],
  ["Dishwasher","sink"],["Line Cook","heat"],["Sous Chef","second"],
  ["Florist","flowers"],["Gardener","soil"],["Landscaper","lawnmower"],
  ["Arborist","tree"],["Beekeeper","suit"],["Rancher","cowboy"],
  ["Veterinary Technician","clinic"],["Zookeeper","animals"],["Marine Biologist","ocean"],
  ["Paleontologist","fossils"],["Archaeologist","dig"],["Anthropologist","culture"]
],
professions:[
  ["Doctor","residency"],["Nurse","rounds"],["Teacher","curriculum"],
  ["Chef","brigade"],["Waiter","section"],["Pilot","logbook"],
  ["Flight Attendant","jumpseat"],["Driver","CDL"],["Mechanic","diagnostic"],
  ["Plumber","soldering"],["Electrician","breaker"],["Carpenter","joinery"],
  ["Painter","primer"],["Firefighter","apparatus"],["Police Officer","precinct"],
  ["Soldier","drill"],["Lawyer","brief"],["Judge","chambers"],
  ["Cashier","drawer"],["Barista","grind"],["Bartender","muddler"],
  ["Photographer","bokeh"],["Musician","gig"],["Singer","vibrato"],
  ["Actor","callback"],["Dancer","barre"],["Artist","medium"],
  ["Writer","revision"],["Journalist","byline"],["Scientist","control"],
  ["Accountant","ledger"],["Banker","interest"],["Architect","elevation"],
  ["Engineer","tolerance"],["Programmer","syntax"],["Designer","kerning"],
  ["Dentist","crown"],["Veterinarian","scrubs"],["Pharmacist","compounding"],
  ["Librarian","circulation"],["Secretary","memorandum"],["Receptionist","directory"],
  ["Mail Carrier","satchel"],["Delivery Driver","manifest"],["Truck Driver","logbook"],
  ["Construction Worker","permit"],["Janitor","custodial"],["Security Guard","shift"],
  ["Lifeguard","certification"],["Personal Trainer","certification"],["Coach","clipboard"],
  ["Referee","whistle"],["Umpire","indicator"],["Athlete","draft"],
  ["Model","portfolio"],["Makeup Artist","contour"],["Hair Stylist","sectioning"],
  ["Tailor","alterations"],["Cobbler","resoling"],["Jeweler","setting"],
  ["Butcher","cleaver"],["Baker","proofing"],["Pastry Chef","piping"],
  ["Sommelier","vintage"],["Mixologist","bitters"],["Barback","stock"],
  ["Dishwasher","sanitizer"],["Line Cook","mise"],["Sous Chef","expedite"],
  ["Florist","arrangement"],["Gardener","mulch"],["Landscaper","irrigation"],
  ["Arborist","pruning"],["Beekeeper","smoker"],["Rancher","branding"],
  ["Veterinary Technician","restraint"],["Zookeeper","enrichment"],["Marine Biologist","dive"],
  ["Paleontologist","excavation"],["Archaeologist","stratigraphy"],["Anthropologist","fieldwork"]
]
};
const categoryNames={
  sports:"Sports",
  animals:"Animals",
  food:"Food & Drink",
  locations:"Locations",
  objects:"Objects",
  entertainment:"Entertainment",
  professions:"Professions"
};
let names=[],roles=[],current,currentCategory,viewed=0,imposterNames=[],totalPlayers=0;
const audioContext=new (window.AudioContext||window.webkitAudioContext)();
function playSound(frequency,duration,type='sine'){
  if(!document.getElementById("soundEffects")?.checked) return;
  try{
    const osc=audioContext.createOscillator();
    const gain=audioContext.createGain();
    osc.connect(gain);
    gain.connect(audioContext.destination);
    osc.frequency.value=frequency;
    osc.type=type;
    gain.gain.setValueAtTime(0.1,audioContext.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01,audioContext.currentTime+duration);
    osc.start(audioContext.currentTime);
    osc.stop(audioContext.currentTime+duration);
  }catch(e){}
}
function createConfetti(){
  const colors=['#6366f1','#a855f7','#ec4899','#f59e0b','#10b981','#06b6d4'];
  for(let i=0;i<50;i++){
    setTimeout(()=>{
      const confetti=document.createElement('div');
      confetti.className='confetti';
      confetti.style.left=Math.random()*100+'%';
      confetti.style.top='-10px';
      confetti.style.background=colors[Math.floor(Math.random()*colors.length)];
      confetti.style.animationDelay=Math.random()*0.5+'s';
      confetti.style.animationDuration=(2+Math.random()*2)+'s';
      document.body.appendChild(confetti);
      setTimeout(()=>confetti.remove(),5000);
    },i*30);
  }
}
const show=s=>{
  [menu,setup,game].forEach(x=>x.classList.remove("active"));
  s.classList.add("active");
};
document.getElementById("startBtn").onclick=()=>show(setup);
document.getElementById("backBtn").onclick=()=>show(menu);
document.getElementById("namesBtn").onclick=()=>{
  namesDiv.innerHTML="";
  for(let i=0;i<playerCount.value;i++){
    const input=document.createElement("input");
    input.placeholder="Player "+(i+1);
    namesDiv.appendChild(input);
  }
};
document.getElementById("beginBtn").onclick=()=>{
  names=[...namesDiv.querySelectorAll("input")].map((i,n)=>i.value||`Player ${n+1}`);
  startRound();
};
document.getElementById("closeRole").onclick=()=>roleOverlay.classList.remove("show");
document.getElementById("revealBtn").onclick=showReveal;
document.getElementById("nextRound").onclick=startRound;
document.getElementById("settingsBtn").onclick=()=>{
  show(setup);
  document.getElementById("settingsBtn").style.display="none";
};
document.getElementById("settingsToggleBtn").onclick=()=>{
  const panel=document.getElementById("settingsPanel");
  if(panel.style.display==="none"){
    panel.style.display="block";
  }else{
    panel.style.display="none";
  }
};
document.getElementById("menuBtn").onclick=()=>{
  finalOverlay.classList.remove("show");
  show(menu);
};
function startRound(){
  viewed=0;
  revealBtn.style.display="none";
  document.getElementById("settingsBtn").style.display="none";
  finalOverlay.classList.remove("show");
  show(game);
  if(category.value==="all"){
    const categories=Object.keys(data);
    currentCategory=categories[Math.floor(Math.random()*categories.length)];
    const pool=data[currentCategory];
    current=pool[Math.floor(Math.random()*pool.length)];
  }else{
    currentCategory=category.value;
    const pool=data[currentCategory];
    current=pool[Math.floor(Math.random()*pool.length)];
  }
  roles=Array(names.length).fill("player");
  for(let i=0;i<Math.min(imposterCount.value,names.length-1);i++) roles[i]="imposter";
  roles.sort(()=>Math.random()-.5);
  imposterNames=names.filter((_,i)=>roles[i]==="imposter");
  
  const randomSpeaker=document.getElementById("randomSpeaker").checked;
  if(randomSpeaker){
    speaker.textContent=names[Math.floor(Math.random()*names.length)];
  }else{
    speaker.textContent=names[0];
  }
  
  grid.innerHTML="";
  const hardMode=document.getElementById("hardMode").checked;
  const showCat=hardMode?false:document.getElementById("showCategory").checked;
  const showHintVal=hardMode?false:document.getElementById("showHint").checked;
  const knowEachOther=document.getElementById("impostersKnowEachOther").checked;
  const showWordLength=document.getElementById("showWordCount").checked;
  
  names.forEach((n,i)=>{
    const t=document.createElement("div");
    t.className="tile";
    t.innerHTML=`<span>${n}</span>`;
    
    // Add pulsing animation to unused tiles
    setTimeout(()=>{
      if(!t.classList.contains("used")){
        t.classList.add("pulsing");
      }
    },500);
    
    const showRole=()=>{
      if(t.classList.contains("used")) return;
      t.classList.remove("pulsing");
      
      if(roles[i]==="imposter"){
        roleOverlay.style.background="rgba(239,68,68,.15)";
        roleOverlay.style.backdropFilter="blur(12px)";
        roleOverlay.style.webkitBackdropFilter="blur(12px)";
        let content=`<div class="imposter-text">IMPOSTER</div>
          <p class="muted">You don't know the word</p>`;
        if(showCat){
          content+=`<p style="font-size:20px;margin-top:20px;font-weight:700;color:var(--danger)">Category: ${categoryNames[currentCategory]}</p>`;
        }
        if(showHintVal){
          content+=`<p style="font-size:18px;margin-top:12px;font-weight:600;color:var(--text-muted)">Hint: "${current[1]}"</p>`;
        }
        if(showWordLength){
          content+=`<p style="font-size:16px;margin-top:12px;font-weight:600;color:var(--text-muted)">Word Length: ${current[0].length} letters</p>`;
        }
        if(knowEachOther && imposterNames.length>1){
          const otherImposters=imposterNames.filter(name=>name!==n).join(", ");
          content+=`<p style="font-size:16px;margin-top:16px;font-weight:600;color:var(--danger)">Other Imposters: ${otherImposters}</p>`;
        }
        content+=`<p class="muted" style="margin-top:16px;font-size:15px">Blend in and figure it out</p>`;
        roleContent.innerHTML=content;
      }else{
        roleOverlay.style.background="rgba(0,0,0,.95)";
        roleOverlay.style.backdropFilter="blur(12px)";
        roleOverlay.style.webkitBackdropFilter="blur(12px)";
        roleContent.innerHTML=`
          <h2 style="margin-bottom:12px;color:var(--text-muted);font-size:16px;font-weight:600;text-transform:uppercase;letter-spacing:1px">Your Word</h2>
          <div class="role-word">${current[0]}</div>
          <p class="muted" style="margin-top:16px;font-size:15px">Give subtle clues without being obvious</p>
        `;
      }
      roleOverlay.classList.add("show");
      t.classList.add("used");
      viewed++;
      if(viewed===names.length){
        revealBtn.style.display="block";
        document.getElementById("settingsBtn").style.display="block";
      }
    };
    t.onclick=showRole;
    t.ontouchstart=(e)=>{
      e.preventDefault();
      showRole();
    };
    grid.appendChild(t);
  });
}
function showReveal(){
  finalWord.textContent=current[0];
  document.getElementById("finalCategory").textContent=categoryNames[currentCategory];
  document.getElementById("finalHint").textContent=current[1];
  finalImposters.textContent=names.filter((_,i)=>roles[i]==="imposter").join(", ");
  finalOverlay.classList.add("show");
}
});
</script>
</body>
</html>
