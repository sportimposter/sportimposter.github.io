<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Imposter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');

:root{
--bg:#000;
--card:#0b0b0b;
--border:#1f1f1f;
--text:#f5f5f5;
--muted:#9ca3af;
--accent:#ffffff;
}

*{box-sizing:border-box;font-family:'Inter',system-ui,sans-serif}

body{
margin:0;
background:var(--bg);
color:var(--text);
padding:16px;
}

.hidden{display:none}
.screen{max-width:420px;margin:auto}

.card{
background:var(--card);
border:1px solid var(--border);
border-radius:22px;
padding:22px;
margin-top:16px;
}

h1{font-size:34px;font-weight:800;margin:0 0 8px}
h2{font-size:18px;margin-bottom:14px}

label{
font-size:13px;
color:var(--muted);
display:block;
margin-bottom:6px;
}

input,select{
width:100%;
background:#000;
border:1px solid var(--border);
border-radius:14px;
padding:12px;
color:var(--text);
font-size:15px;
margin-bottom:14px;
}

button{
width:100%;
padding:14px;
border-radius:16px;
border:none;
font-weight:700;
background:var(--accent);
color:#000;
cursor:pointer;
}

button.secondary{
background:#000;
color:var(--text);
border:1px solid var(--border);
margin-top:10px;
}

.grid{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:14px;
margin-top:14px;
}

.tile{
background:#000;
border:1px solid var(--border);
border-radius:18px;
padding:40px 10px;
font-weight:700;
cursor:pointer;
}

.tile.used{opacity:0;pointer-events:none}

.overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,.92);
display:flex;
align-items:center;
justify-content:center;
display:none;
}

.overlay.show{display:flex}

.modal{
background:#000;
border:1px solid var(--border);
border-radius:22px;
padding:26px;
width:90%;
max-width:360px;
text-align:center;
}
</style>
</head>

<body>

<div class="screen">

<!-- MENU -->
<div id="menu" class="card">
<h1>Imposter</h1>
<p style="color:var(--muted)">A social deduction game</p>
<button onclick="goSetup()">Begin</button>
</div>

<!-- SETUP -->
<div id="setup" class="card hidden">
<h2>Game Setup</h2>

<label>Players</label>
<input id="playerCount" type="number" value="6">

<label>Imposters</label>
<input id="imposterCount" type="number" value="1">

<label>Category</label>
<select id="categorySelect">
<option value="all">All</option>
<option value="sports">Sports</option>
<option value="animals">Animals</option>
<option value="food">Food</option>
<option value="locations">Locations</option>
<option value="objects">Objects</option>
</select>

<div id="names"></div>

<button onclick="startGame()">Start Game</button>
<button class="secondary" onclick="goMenu()">Back</button>
</div>

<!-- GAME -->
<div id="game" class="card hidden">
<p id="speaker"></p>
<div id="grid" class="grid"></div>
<button class="secondary hidden" id="revealBtn" onclick="showReveal()">Reveal</button>
<button class="secondary" onclick="newRound()">Next Round</button>
</div>

</div>

<!-- ROLE -->
<div id="overlay" class="overlay">
<div class="modal">
<h2 id="roleTitle"></h2>
<p id="roleText"></p>
<button onclick="closeOverlay()">OK</button>
</div>
</div>

<!-- REVEAL -->
<div id="reveal" class="overlay">
<div class="modal">
<h2>Answer</h2>
<p id="finalAnswer"></p>
<p><b>Imposters</b></p>
<p id="finalImposters"></p>
<button onclick="closeReveal()">Done</button>
</div>
</div>

<script>
const data={
sports:[["LeBron James","longevity"],["Mahomes","sidearm"],["Ohtani","two-way"]],
animals:[["Dog","leash"],["Cat","whiskers"],["Lion","mane"]],
food:[["Pizza","slice"],["Burger","stack"],["Sushi","roll"]],
locations:[["Library","stacks"],["Airport","gate"],["Beach","shore"]],
objects:[["Phone","screen"],["Keys","jingle"],["Clock","hands"]]
};

let names=[],roles=[],current={},viewed=0;

function goSetup(){
menu.classList.add("hidden");
setup.classList.remove("hidden");
buildNames();
}

function goMenu(){
setup.classList.add("hidden");
menu.classList.remove("hidden");
}

function buildNames(){
namesDiv.innerHTML="";
for(let i=0;i<playerCount.value;i++){
const input=document.createElement("input");
input.placeholder="Player "+(i+1);
namesDiv.appendChild(input);
}
}

function startGame(){
names=[...namesDiv.querySelectorAll("input")].map((i,n)=>i.value||("Player "+(n+1)));
setup.classList.add("hidden");
game.classList.remove("hidden");
newRound();
}

function newRound(){
viewed=0;
revealBtn.classList.add("hidden");

const pool = categorySelect.value==="all"
? Object.values(data).flat()
: data[categorySelect.value];

current = pool[Math.floor(Math.random()*pool.length)];

roles=Array(names.length).fill("player");
for(let i=0;i<imposterCount.value;i++)roles[i]="imposter";
roles.sort(()=>Math.random()-0.5);

speaker.textContent="First word: "+names[Math.floor(Math.random()*names.length)];
grid.innerHTML="";

names.forEach((n,i)=>{
const tile=document.createElement("div");
tile.className="tile";
tile.textContent=n;
tile.onclick=function(){
showRole(i);
tile.classList.add("used");
viewed++;
if(viewed===names.length)revealBtn.classList.remove("hidden");
};
grid.appendChild(tile);
});
}

function showRole(i){
overlay.classList.add("show");
if(roles[i]==="imposter"){
roleTitle.textContent="IMPOSTER";
roleText.textContent="Category: "+categorySelect.value+" | Hint: "+current[1];
}else{
roleTitle.textContent=current[0];
roleText.textContent="Stay niche.";
}
}

function closeOverlay(){overlay.classList.remove("show")}

function showReveal(){
finalAnswer.textContent=current[0];
finalImposters.textContent=names.filter((_,i)=>roles[i]==="imposter").join(", ");
reveal.classList.add("show");
}

function closeReveal(){reveal.classList.remove("show")}
</script>

</body>
</html>
