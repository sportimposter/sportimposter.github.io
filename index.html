<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Imposter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- iOS Add to Home Screen -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Imposter">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

:root{
  --bg:#0b0b0b;
  --card:#111827;
  --tile:#1f2937;
  --accent:#38bdf8;
  --text:#e5e7eb;
  --muted:#9ca3af;
}

*{box-sizing:border-box;font-family:'Inter',system-ui,sans-serif;}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  text-align:center;
  padding:20px;
}
.hidden{display:none}

button{
  border:none;
  border-radius:999px;
  padding:12px 22px;
  background:#374151;
  color:var(--text);
  font-weight:600;
  cursor:pointer;
}
button:hover{opacity:.9}

h1{margin-bottom:6px}

.controls,.names{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
  margin-bottom:16px;
}

input{
  background:var(--card);
  color:var(--text);
  border:1px solid #374151;
  border-radius:10px;
  padding:8px;
  font-size:14px;
  width:80px;
  text-align:center;
}
.names input{width:130px}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(130px,1fr));
  gap:18px;
  max-width:700px;
  margin:28px auto;
}

.tile{
  background:var(--tile);
  padding:42px 10px;
  border-radius:18px;
  cursor:pointer;
  transition:.25s;
}
.tile:hover{transform:translateY(-2px)}
.tile.used{opacity:0;pointer-events:none}

#speaker{
  color:var(--accent);
  font-weight:600;
  margin:10px 0;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:.3s;
}
.overlay.show{opacity:1;pointer-events:auto}

.card{
  background:var(--card);
  padding:36px 30px;
  border-radius:22px;
  max-width:360px;
  width:90%;
  animation:flip .35s ease;
}
@keyframes flip{
  from{transform:rotateX(90deg);opacity:0}
  to{transform:none;opacity:1}
}
.card p{color:var(--muted)}

#revealBtn{
  display:none;
  background:var(--accent);
  color:#020617;
}
</style>
</head>
<body>

<!-- SETUP SCREEN -->
<div id="setup">
  <h1>üé≠ Imposter</h1>
  <div class="controls">
    Players <input id="playerCount" type="number" min="4" max="12" value="6">
    Imposters <input id="imposterCount" type="number" min="1" max="3" value="1">
  </div>
  <div class="names" id="nameInputs"></div>
  <button onclick="startGame()">‚ñ∂Ô∏è Start Game</button>
</div>

<!-- GAME SCREEN -->
<div id="game" class="hidden">
  <h1>üé≠ Imposter</h1>
  <p id="speaker"></p>
  <div class="grid" id="grid"></div>
  <button onclick="startRound()">üîÑ New Round</button>
  <button id="revealBtn" onclick="showEnd()">üëÅ Reveal Round</button>
</div>

<!-- ROLE OVERLAY -->
<div class="overlay" id="overlay">
  <div class="card">
    <h2 id="cardTitle"></h2>
    <p id="cardText"></p>
    <button onclick="closeOverlay()">Got it</button>
  </div>
</div>

<!-- END OVERLAY -->
<div class="overlay" id="endOverlay">
  <div class="card">
    <h2>Round Reveal</h2>
    <p><b>Category:</b> <span id="finalCategory"></span></p>
    <p><b>Answer:</b> <span id="finalAnswer"></span></p>
    <p><b>Imposters:</b></p>
    <p id="finalImposters"></p>
    <button onclick="closeEnd()">Next Round</button>
  </div>
</div>

<script>
const data={
  MLB:{
    players:["Shohei Ohtani","Aaron Judge","Mookie Betts","Ronald Acu√±a Jr.","Juan Soto","Mike Trout","Freddie Freeman","Bryce Harper","Fernando Tatis Jr.","Corey Seager","Jose Altuve","Vladimir Guerrero Jr."],
    teams:["Yankees","Red Sox","Blue Jays","Rays","Orioles","Guardians","Tigers","Royals","Twins","White Sox","Astros","Mariners","Rangers","Angels","Athletics","Braves","Mets","Phillies","Marlins","Nationals","Brewers","Cubs","Cardinals","Reds","Pirates","Dodgers","Padres","Giants","Diamondbacks","Rockies"]
  },
  NFL:{
    players:["Patrick Mahomes","Josh Allen","Joe Burrow","Lamar Jackson","Justin Jefferson","Tyreek Hill","Christian McCaffrey","Travis Kelce","Aaron Rodgers","CeeDee Lamb","Jalen Hurts"],
    teams:["Cardinals","Falcons","Ravens","Bills","Panthers","Bears","Bengals","Browns","Cowboys","Broncos","Lions","Packers","Texans","Colts","Jaguars","Chiefs","Raiders","Chargers","Rams","Dolphins","Vikings","Patriots","Saints","Giants","Jets","Eagles","Steelers","49ers","Seahawks","Buccaneers","Titans","Commanders"]
  },
  NBA:{
    players:["LeBron James","Stephen Curry","Kevin Durant","Nikola Jokic","Giannis Antetokounmpo","Luka Donƒçiƒá","Jayson Tatum","Joel Embiid"],
    teams:["Hawks","Celtics","Nets","Hornets","Bulls","Cavaliers","Mavericks","Nuggets","Pistons","Warriors","Rockets","Pacers","Clippers","Lakers","Grizzlies","Heat","Bucks","Timberwolves","Pelicans","Knicks","Thunder","Magic","76ers","Suns","Trail Blazers","Kings","Spurs","Raptors","Jazz","Wizards"]
  }
};

let names=[],roles=[],category="",answer="",viewed=0;

const rand=a=>a[Math.floor(Math.random()*a.length)];
const shuffle=a=>{for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}};

function buildNames(){
  nameInputs.innerHTML="";
  for(let i=0;i<playerCount.value;i++){
    const inp=document.createElement("input");
    inp.placeholder=`Player ${i+1}`;
    nameInputs.appendChild(inp);
  }
}
playerCount.onchange=buildNames;
buildNames();

function startGame(){
  names=[...nameInputs.querySelectorAll("input")].map((i,idx)=>i.value||`Player ${idx+1}`);
  setup.classList.add("hidden");
  game.classList.remove("hidden");
  startRound();
}

function startRound(){
  revealBtn.style.display="none";
  viewed=0;

  const league=rand(Object.keys(data));
  const type=Math.random()<0.5?"players":"teams";
  category=`${league} ${type==="players"?"Player":"Team"}`;
  answer=rand(data[league][type]);

  speaker.textContent="First word: "+rand(names);

  roles=Array(names.length).fill("PLAYER");
  for(let i=0;i<Math.min(imposterCount.value,names.length-1);i++)roles[i]="IMPOSTER";
  shuffle(roles);

  grid.innerHTML="";
  names.forEach((n,i)=>{
    const t=document.createElement("div");
    t.className="tile";
    t.textContent=n;
    t.onclick=()=>{
      reveal(i);
      t.classList.add("used");
      viewed++;
      if(viewed===names.length)revealBtn.style.display="inline-block";
    };
    grid.appendChild(t);
  });
}

function reveal(i){
  overlay.classList.add("show");
  if(roles[i]==="IMPOSTER"){
    cardTitle.textContent="IMPOSTER";
    cardText.textContent=category;
  }else{
    cardTitle.textContent=answer;
    cardText.textContent="Stay quiet.";
  }
}
function closeOverlay(){overlay.classList.remove("show");}

function showEnd(){
  finalCategory.textContent=category;
  finalAnswer.textContent=answer;
  finalImposters.textContent=names.filter((_,i)=>roles[i]==="IMPOSTER").join(", ");
  endOverlay.classList.add("show");
}
function closeEnd(){endOverlay.classList.remove("show");}
</script>

</body>
</html>
