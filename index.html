<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Imposter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Imposter">

<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
<circle cx='50' cy='50' r='50' fill='%23020a18'/>
<circle cx='50' cy='36' r='16' fill='%2360a5fa'/>
<path d='M30 70c0-14 40-14 40 0v8H30z' fill='%2360a5fa'/>
<rect x='24' y='30' width='52' height='10' rx='5' fill='%23020a18'/>
</svg>">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');

:root{
--bg:#020617;
--card:#0f172a;
--soft:#111827;
--accent:#60a5fa;
--text:#e5e7eb;
--muted:#94a3b8;
}

*{box-sizing:border-box;font-family:'Inter',system-ui,sans-serif}

body{
margin:0;
background:linear-gradient(180deg,#020617,#0b122a);
color:var(--text);
padding:16px;
}

.hidden{display:none}

h1{font-size:34px;font-weight:800;margin:10px 0}
h2{margin:0 0 8px}
p{color:var(--muted);margin:6px 0}

button{
border:none;
border-radius:18px;
padding:16px;
font-weight:700;
background:var(--accent);
color:#020617;
cursor:pointer;
width:100%;
}

button.secondary{
background:var(--soft);
color:var(--text);
}

.screen{
max-width:420px;
margin:auto;
}

.card{
background:linear-gradient(160deg,var(--card),#020617);
border-radius:28px;
padding:22px;
margin-top:18px;
box-shadow:0 20px 40px rgba(0,0,0,.4);
}

.row{
display:flex;
gap:12px;
}

input,select{
background:var(--soft);
border:1px solid #1e293b;
border-radius:14px;
padding:12px;
color:var(--text);
width:100%;
text-align:center;
font-size:16px;
}

.grid{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:14px;
margin-top:18px;
}

.tile{
background:linear-gradient(145deg,#111c3a,#0b1433);
border-radius:22px;
padding:40px 12px;
font-weight:700;
text-align:center;
cursor:pointer;
}

.tile.used{opacity:0;pointer-events:none}

.overlay{
position:fixed;
inset:0;
background:rgba(2,6,23,.92);
display:flex;
align-items:center;
justify-content:center;
opacity:0;
pointer-events:none;
transition:.3s;
}

.overlay.show{opacity:1;pointer-events:auto}

.modal{
background:linear-gradient(160deg,var(--card),#020617);
border-radius:26px;
padding:28px;
width:90%;
max-width:360px;
text-align:center;
}

.icon{
font-size:40px;
margin-bottom:8px;
}
</style>
</head>

<body>

<div class="screen">

<!-- MENU -->
<div id="menu" class="card">
<div class="icon">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
<h1>Imposter</h1>
<p>A social deduction game</p>
<button onclick="goSetup()">Begin</button>
</div>

<!-- SETUP -->
<div id="setup" class="card hidden">
<h2>Game Setup</h2>

<div class="row">
<input id="playerCount" type="number" min="4" max="12" value="6" placeholder="Players">
<input id="imposterCount" type="number" min="1" max="3" value="1" placeholder="Imposters">
</div>

<select id="categorySelect">
<option value="all">üåê All Categories</option>
<option value="sports">üèü Sports</option>
<option value="animals">üêæ Animals</option>
<option value="food">üçî Food</option>
<option value="locations">üìç Locations</option>
<option value="objects">üì¶ Objects</option>
</select>

<div id="names"></div>

<button onclick="startGame()">Start Game</button>
<button class="secondary" onclick="goMenu()">Back</button>
</div>

<!-- GAME -->
<div id="game" class="card hidden">
<p id="speaker"></p>
<div class="grid" id="grid"></div>
<button id="revealBtn" class="secondary hidden" onclick="showReveal()">Reveal</button>
<button class="secondary" onclick="newRound()">Next Round</button>
</div>

</div>

<!-- ROLE -->
<div class="overlay" id="overlay">
<div class="modal">
<h2 id="roleTitle"></h2>
<p id="roleText"></p>
<button onclick="closeOverlay()">OK</button>
</div>
</div>

<!-- REVEAL -->
<div class="overlay" id="reveal">
<div class="modal">
<h2>Answer</h2>
<p id="finalAnswer"></p>
<p><b>Imposters</b></p>
<p id="finalImposters"></p>
<button onclick="closeReveal()">Done</button>
</div>
</div>

<script>
const data={
sports:[
["LeBron James","longevity"],
["Patrick Mahomes","sidearm"],
["Shohei Ohtani","two-way"],
["Yankees","pinstripes"],
["Warriors","splash"]
],
animals:[
["Dog","leash"],["Cat","whiskers"],["Lion","mane"],["Elephant","trunk"],
["Penguin","waddle"],["Owl","silent"],["Kangaroo","pouch"]
],
food:[
["Pizza","slice"],["Burger","stack"],["Sushi","roll"],
["Pancakes","stack"],["Fries","basket"],["Donut","glaze"]
],
locations:[
["Library","stacks"],["Airport","gate"],["Beach","shore"],
["Gym","rack"],["Hospital","ward"],["School","hallway"]
],
objects:[
["Phone","screen"],["Keys","jingle"],["Clock","hands"],
["Backpack","zipper"],["Chair","legs"]
]
};

let names=[],roles=[],current={},viewed=0;

function goSetup(){
menu.classList.add("hidden");
setup.classList.remove("hidden");
buildNames();
}
function goMenu(){
setup.classList.add("hidden");
game.classList.add("hidden");
menu.classList.remove("hidden");
}

function buildNames(){
namesDiv.innerHTML="";
for(let i=0;i<playerCount.value;i++){
const iEl=document.createElement("input");
iEl.placeholder=`Player ${i+1}`;
namesDiv.appendChild(iEl);
}
}

function startGame(){
names=[...namesDiv.querySelectorAll("input")].map((i,n)=>i.value||`Player ${n+1}`);
setup.classList.add("hidden");
game.classList.remove("hidden");
newRound();
}

function newRound(){
viewed=0;
revealBtn.classList.add("hidden");

const pool=categorySelect.value==="all"
?Object.values(data).flat()
:data[categorySelect.value];

const pick=pool[Math.floor(Math.random()*pool.length)];
current={answer:pick[0],hint:pick[1],category:categorySelect.options[categorySelect.selectedIndex].text};

roles=Array(names.length).fill("player");
for(let i=0;i<Math.min(imposterCount.value,names.length-1);i++)roles[i]="imposter";
roles.sort(()=>Math.random()-0.5);

speaker.textContent="First word: "+names[Math.floor(Math.random()*names.length)];
grid.innerHTML="";

names.forEach((n,i)=>{
const t=document.createElement("div");
t.className="tile";
t.textContent=n;
t.onclick=()=>{
showRole(i);
t.classList.add("used");
viewed++;
if(viewed===names.length)revealBtn.classList.remove("hidden");
};
grid.appendChild(t);
});
}

function showRole(i){
overlay.classList.add("show");
if(roles[i]==="imposter"){
roleTitle.textContent="IMPOSTER";
roleText.textContent=`Category: ${current.category}\nHint: ${current.hint}`;
}else{
roleTitle.textContent=current.answer;
roleText.textContent="Stay niche.";
}
}

function closeOverlay(){overlay.classList.remove("show")}

function showReveal(){
finalAnswer.textContent=current.answer;
finalImposters.textContent=names.filter((_,i)=>roles[i]==="imposter").join(", ");
reveal.classList.add("show");
}

function closeReveal(){reveal.classList.remove("show")}
</script>

</body>
</html>
